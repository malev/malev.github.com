<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <!-- Meta information -->
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="author" content="Marcos Vanetta (malev)" />
  <meta name="description" content="Authorship and collaboration in open source projects"/>
  <!--Facebook meta -->
  <meta property="og:title" content="Marcos Alejandro Vanetta (malev)" />
  <meta property="og:description" content="Authorship and collaboration in open source projects" />
  <meta property="og:image" content="/images/malev_logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- End of facebook meta -->

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

  <!-- Homepage CSS -->
  <!-- <link rel="stylesheet" href="/css/bootstrap.css" type="text/css" media="screen, projection" /> -->
  <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/css/bootstrap-responsive.min.css" type="text/css" media="screen, projection" />
  
  <!-- Google fonts -->
  <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Ubuntu&v2' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Cabin+Sketch:700&v2' rel='stylesheet' type='text/css'>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<!--  <script src="/js/bootstrap.min.js"></script>-->
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <title>Method arguments in Ruby</title>
</head>
<body>
<div class="container">
  <div class="site">
  <div id="post">
    <div class="title">
      <h1><a href='/#blog' name='blog'>Blog posts</a></h1>
    </div>
    <h1>Method arguments in Ruby</h1>

<p>Hay algo que extraño mucho de otros lenguajes y no entiendo bien por que no lo implementarion en Ruby. Los argumentos con nombre de los métodos o funciones. ¿De qué estoy hablando? Miren como se declaran los métodos en python:</p>

<div class="highlight"><pre><code class="python"><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">spam</span><span class="p">,</span> <span class="n">eggs</span><span class="p">,</span> <span class="n">toast</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">ham</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span> <span class="c"># First 2 required</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">spam</span><span class="p">,</span> <span class="n">eggs</span><span class="p">,</span> <span class="n">toast</span><span class="p">,</span> <span class="n">ham</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">ham</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eggs</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="n">spam</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eggs</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">func</span><span class="p">(</span><span class="n">toast</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">eggs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">spam</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</code></pre>
</div>


<p>Lindo, lindo, muy lindo!
Lo interesante es poder pasar los objetos con nombre, entonces tenemos una lectura simple y no necesitamos atarnos al orden en que fue definida la función. Como les decía Ruby no cuenta con esta posibilidad :(
<strong>Tipos de métodos en ruby:</strong>
- Argumentos fijos
- Argumentos con valores por defecto
- Argumentos opcionales</p>

<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">metodo1</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="k">end</span>
<span class="k">def</span> <span class="nf">metodo2</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span>
<span class="k">def</span> <span class="nf">metodo3</span><span class="p">(</span><span class="o">*</span><span class="nb">p</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">metodo1</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">metodo2</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># b valdría 2</span>
<span class="n">medoto3</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># p = [4,5,6]</span>
</code></pre>
</div>


<p>El más interesante es el 3er caso en el que todos los argumentos se convierten en elementos de un arreglo (splat arguments). Nota: para esto se necesita el asterisco (*).
<strong>Recibiendo un hash como argumento</strong></p>

<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">metodo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">my_hash</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">metodo</span> <span class="mi">2</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:something</span> <span class="o">=&gt;</span> <span class="s2">&quot;shomething&quot;</span><span class="p">}</span>
<span class="c1"># o podría ser:</span>
<span class="n">metodo</span> <span class="mi">2</span><span class="p">,</span> <span class="ss">:something</span> <span class="o">=&gt;</span> <span class="s2">&quot;shomething&quot;</span>
</code></pre>
</div>


<p>Cuando el último parámetro es un hash, Ruby no necesita de las llaves, lo cual los convierte en cuasi named arguments.
Ejemplos claro de esto último son los helpers de rails. Aquí un ejemplo:</p>

<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">link_to</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>
  <span class="k">if</span> <span class="nb">block_given?</span>
    <span class="c1"># ...</span>
  <span class="k">else</span>
    <span class="nb">name</span>         <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">first</span>
    <span class="n">options</span>      <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">second</span> <span class="o">||</span> <span class="p">{}</span>
    <span class="n">html_options</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">third</span>
    <span class="c1">#...</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>


<p>Un punto a destacar es como este método divide los argumentos en categorías. No es el único, de hecho, <strong>link_to</strong> y la mayoría de los <em>helpers</em> dividen en 3 categorías, el primer y obligatorio (name), luego un diccionario para options y por último los html_options.</p>

<div class="highlight"><pre><code class="ruby"><span class="n">link_to</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{},</span> <span class="n">html_options</span> <span class="o">=</span> <span class="kp">nil</span><span class="p">)</span>
</code></pre>
</div>




    
      <div class="comments" style="margin-top: 20px;">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'malevsblog'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    
  </div>
  <div id="related">
    <h2><a href='/about.html'>About the author</a></h2>
  </div>

  <div id="related">
    <h2>Related Posts</h2>
    <ul class="posts">
      
        <li><span>01 Jun 2012</span> &raquo; <a href="/backbone-first-steps">Learning Javascript</a></li>
      
        <li><span>13 Apr 2012</span> &raquo; <a href="/nginx-passenger-and-php">Nginx, passenger and PHP</a></li>
      
        <li><span>09 Apr 2012</span> &raquo; <a href="/learning-javascript">Learning Javascript</a></li>
      
    </ul>
  </div>
</div>
  <div class="site">
    <div class="footer">
      <div class="contact">
        <p style="margin:0;">
          <a href="/about.html">Marcos Vanetta</a> <strong>(malev)</strong><br />
          Software engineer<br />
          <a href="http://github.com/malev/">github</a> | <a href="http://twitter.com/malev/">twitter</a> | <a href="http://launchpad.net/~marcosvanetta">Launchpad</a>
        </p>
      </div>
      <div class="rss">
        <a href="http://feeds.feedburner.com/malev">
          <img src="/images/rss-logo.png" alt="Subscribe to RSS Feed" style="width: 64px;"/>
        </a>
      </div>
    </div>
  </div>
</div>
<a href="http://github.com/malev"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29516046-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
